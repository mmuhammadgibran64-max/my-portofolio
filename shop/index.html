<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gibran Store - Masuk</title>
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <style>
        body { background: #ff6600; min-height: 100vh; display: flex; align-items: center; justify-content: center; padding: 20px; font-family: sans-serif; }
        .card-login { background: white; padding: 30px; border-radius: 20px; width: 100%; max-width: 380px; box-shadow: 0 10px 25px rgba(0,0,0,0.2); }
        .btn-masuk { background: #ff6600; color: white; border: none; width: 100%; padding: 12px; border-radius: 10px; font-weight: bold; margin-top: 20px; width: 100%; }
        label { font-size: 12px; font-weight: bold; color: #555; margin-top: 10px; display: block; }
    </style>
</head>
<body>

<div class="card-login shadow">
    <h4 class="fw-bold text-center" style="color: #ff6600;">GIBRAN STORE</h4>
    <p class="text-center text-muted small">Silakan login untuk belanja</p>
    
    <div class="mt-3">
        <label>Tanggal</label>
        <input type="text" id="tgl" class="form-control bg-light" readonly>
        <label>Nama Pelanggan</label>
        <input type="text" id="nama" class="form-control" placeholder="Nama Lengkap">
        <label>Nomor HP (WA)</label>
        <input type="number" id="hp" class="form-control" placeholder="08xxxx">
        <label>Alamat Rumah</label>
        <textarea id="alamat" class="form-control" rows="2" placeholder="Jl. Merpati No..."></textarea>
    </div>

    <button onclick="kirimData()" id="btnMasuk" class="btn-masuk">MASUK KE TOKO</button>
</div>

<script>
    // Registrasi PWA
    if ('serviceWorker' in navigator) { navigator.serviceWorker.register('sw.js'); }

    // Tanggal otomatis
    document.getElementById('tgl').value = new Date().toLocaleDateString('id-ID');

    function kirimData() {
        const btn = document.getElementById('btnMasuk');
        const nama = document.getElementById('nama').value;
        const hp = document.getElementById('hp').value;
        const alamat = document.getElementById('alamat').value;

        if(!nama || !hp || !alamat) return alert("Bran, datanya jangan dikosongin!");

        btn.innerText = "Mendaftarkan...";
        btn.disabled = true;

        // Simpan data ke memori HP
        localStorage.setItem('namaUser', nama);
        localStorage.setItem('hpUser', hp);
        localStorage.setItem('alamatUser', alamat);

        // Link Google Script kamu
        const scriptURL = 'https://script.google.com/macros/s/AKfycbzu2dxkOiTjS4c6t97zGjZkVvUKjJpVZeJt3Dbwv5bDqYHpLMEruc4WBnlWQNsh2k6eCQ/exec';

        fetch(scriptURL, { 
            method: 'POST', 
            mode: 'no-cors',
            body: new URLSearchParams({
                'sheetName': 'User',
                'tanggal': document.getElementById('tgl').value,
                'nama': nama,
                'hp': hp,
                'alamat': alamat
            })
        }).then(() => {
            window.location.href = "dashboard.html";
        }).catch(() => {
            window.location.href = "dashboard.html";
        });
    }
</script>
</body>
</html>
<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard High-Tech | M. Gibran</title>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        :root { --accent: #ff9800; --bg: #000; --card: #111; --text: #ececec; --success: #00ff88; }
        body { background: var(--bg); color: var(--text); font-family: 'Segoe UI', sans-serif; margin: 0; padding: 20px; line-height: 1.6; }
        .wrapper { max-width: 900px; margin: auto; background: var(--card); padding: 30px; border-radius: 25px; border: 1px solid #333; }
        
        /* Deskripsi Asli Gibran (TETAP ADA) */
        .full-description { text-align: left; white-space: pre-line; margin-bottom: 30px; border-bottom: 1px solid #222; padding-bottom: 20px; font-size: 15px; }
        .header-section { color: var(--accent); font-weight: bold; text-transform: uppercase; display: block; margin-top: 20px; border-left: 4px solid var(--accent); padding-left: 10px; }

        /* FITUR BARU: CCTV & UPLOAD */
        .system-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin: 30px 0; }
        .panel { background: #080808; border-radius: 20px; border: 1px solid #222; padding: 20px; }
        #cctv-view { width: 100%; background: #000; border-radius: 12px; transform: scaleX(-1); border: 1px solid #444; }
        .upload-zone { border: 2px dashed #333; padding: 20px; text-align: center; border-radius: 15px; cursor: pointer; }
        .btn-action { background: var(--accent); color: #000; border: none; padding: 12px; border-radius: 10px; font-weight: bold; width: 100%; cursor: pointer; margin-top: 10px; }
        
        /* Area Sosmed & Login */
        #konten-sosmed-gibran { margin: 20px 0; padding: 15px; border: 1px dashed #444; border-radius: 15px; }
        .login-box { background: #080808; padding: 20px; border-radius: 20px; text-align: center; border: 1px solid #222; }
    </style>
</head>
<body>

<div class="wrapper">
    <h1 style="text-align:center;">PROFIL & SECURITY SYSTEM</h1>
    
    <div class="full-description">
Perkenalkan, nama saya Gibran. Saya merupakan mahasiswa Hubungan Masyarakat (Humas) di LP3I Kramat Raya. Saya memiliki pengalaman bekerja di Gatot Subroto pada bagian Monitoring, dengan masa kerja selama satu bulan. Setelah itu saya belum bekerja lagi dan sedang fokus mengembangkan diri, keterampilan, serta portofolio pribadi.

<span class="header-section">Keahlian & Pengalaman</span>
Bermain Gitar, Futsal.
Monitoring - Gatot Subroto (1 Bulan)
    </div>

    <div class="system-grid">
        <div class="panel">
            <h3 style="color:var(--accent); margin-top:0;"><i class="fas fa-video"></i> Live CCTV Absen</h3>
            <video id="cctv-view" autoplay playsinline></video>
            <button class="btn-action" onclick="absenMuka()">SCAN WAJAH</button>
            <p id="status-absen" style="font-size:12px; margin-top:10px; color:var(--success);"></p>
        </div>

        <div class="panel">
            <h3 style="color:var(--accent); margin-top:0;"><i class="fas fa-upload"></i> Upload Media</h3>
            <div class="upload-zone" onclick="document.getElementById('file-input').click()">
                <p style="font-size:13px;">Klik untuk Upload Foto/Video</p>
                <input type="file" id="file-input" hidden onchange="alert('File siap diupload!')">
            </div>
            <button class="btn-action" style="background:#333; color:#fff;" onclick="window.location.href='dashboard-terpisah.html'">KE DASHBOARD TERPISAH</button>
        </div>
    </div>

    <div id="konten-sosmed-gibran">Memuat Sosial Media...</div>

    <div class="login-box">
        <h3>Daftar Pengunjung</h3>
        <div id="g_id_onload" 
             data-client_id="594310366887-dsrs8pdnrdrhneg3h15saj7btp08oh67.apps.googleusercontent.com" 
             data-callback="handleLogin"></div>
        <div style="display:flex; justify-content:center;" class="g_id_signin" data-type="standard"></div>
    </div>
</div>

<script>
    // FUNGSI AKTIFKAN CCTV
    const video = document.getElementById('cctv-view');
    navigator.mediaDevices?.getUserMedia({ video: true }).then(s => video.srcObject = s);

    function absenMuka() {
        document.getElementById('status-absen').innerText = "âœ… Wajah Terdeteksi: Absen Berhasil!";
    }

    // FUNGSI PANGGIL SOSMED
    fetch('sosial-media.html').then(r => r.text()).then(d => document.getElementById('konten-sosmed-gibran').innerHTML = d);

    // FUNGSI LOGIN KE GOOGLE SHEETS (PAKAI LINK LO)
    function handleLogin(response) {
        const payload = JSON.parse(atob(response.credential.split('.')[1]));
        const urlSheets = "https://script.google.com/macros/s/AKfycbx4FDV5UVR4LHyWNbXtWFna8IDN6p2Yylh1zp_F113096sAwi7mFOE1DNu6faRKYBmJeg/exec";

        fetch(urlSheets, {
            method: 'POST',
            mode: 'no-cors',
            body: JSON.stringify({ name: payload.name, email: payload.email })
        }).then(() => alert("Data " + payload.name + " Masuk ke Sheets!"));
    }
</script>

</body>
</html>

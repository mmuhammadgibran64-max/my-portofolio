<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profil & Daftar - Gibran</title>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <style>
        :root { --primary: #1a73e8; --dark: #202124; --bg: #f8f9fa; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); margin: 0; color: var(--dark); line-height: 1.6; }
        .container { max-width: 800px; margin: 20px auto; padding: 20px; }
        
        /* Deskripsi Luar Aplikasi */
        .intro-card { background: white; padding: 30px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); margin-bottom: 20px; }
        .intro-card h1 { color: var(--primary); margin-top: 0; }
        .section-title { border-left: 4px solid var(--primary); padding-left: 10px; margin-top: 20px; color: var(--primary); font-weight: bold; }
        
        /* Box Daftar */
        .login-box { background: #fff; padding: 30px; border-radius: 15px; border: 2px solid #e0e0e0; text-align: center; margin-bottom: 40px; }
        input[type="tel"] { width: 80%; padding: 12px; margin: 10px 0; border: 1px solid #ccc; border-radius: 8px; font-size: 16px; outline-color: var(--primary); }

        /* Dashboard (SETELAH LOGIN - SUDAH DIHAPUS SEMUA ISINYA) */
        #dashboard { display: none; background: white; border-radius: 20px; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.1); padding-bottom: 30px; text-align: center; }
        .banner { width: 100%; height: 160px; background: linear-gradient(135deg, #1a73e8, #0d47a1); position: relative; }
        #clock { font-size: 22px; font-weight: bold; color: white; position: absolute; top: 15px; right: 20px; background: rgba(0,0,0,0.2); padding: 5px 15px; border-radius: 20px; }
        
        .user-header { margin-top: -60px; }
        .profile-pic { width: 120px; height: 120px; border-radius: 50%; border: 5px solid white; background: #fff; object-fit: cover; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .job-title { color: var(--primary); font-weight: bold; font-size: 18px; margin-top: 10px; }
        .logout-btn { margin-top: 30px; padding: 10px 25px; background: #f44336; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <div id="intro-section">
        <div class="intro-card">
            <h1>Halo, Saya Gibran</h1>
            <p>Perkenalkan, nama saya <b>Gibran</b>. Saya merupakan mahasiswa Hubungan Masyarakat (Humas) di LP3I Kramat Raya. Saya memiliki pengalaman bekerja di Gatot Subroto pada bagian Monitoring dan di BGI pada bagian operasional.</p>
            <p>Saya adalah pribadi yang disiplin, cepat beradaptasi, serta mau belajar hal baru. Dalam keseharian, saya senang bermain futsal dan gitar.</p>
            
            <h3 class="section-title">Visi & Misi</h3>
            <p><b>Visi:</b> Menjadi individu yang mampu berkontribusi maksimal dan profesional.<br>
               <b>Misi:</b> Membangun hubungan positif, mengembangkan skill kompeten, dan menjaga integritas.</p>
        </div>

        <div class="login-box" id="login-screen">
            <h3>Pendaftaran Akun</h3>
            <p>Masukkan nomor HP aktif untuk melihat profil profesional saya.</p>
            <input type="tel" id="user-phone" placeholder="Nomor Handphone (Contoh: 0812...)" required>
            <center><div id="buttonDiv" style="margin-top: 15px;"></div></center>
        </div>
    </div>

    <div id="dashboard">
        <div class="banner">
            <div id="clock">00:00:00</div>
        </div>
        <div class="user-header">
            <img id="user-img" src="" class="profile-pic">
            <h2 id="user-name" style="margin-bottom: 5px;">Nama Pengguna</h2>
            <div class="job-title">Desain Grafis</div>
            <p id="display-phone" style="color: #666; font-size: 14px;"></p>
        </div>

        <button class="logout-btn" onclick="location.reload()">Keluar / Logout</button>
    </div>
</div>

<script>
    // --- KONFIGURASI ---
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwV7qFXFk3lRV35_7PfRBidKZBXKdewPP2pc6e9kgTLqeboiRx2qvrd-90SBxPP4sMzlQ/exec";
    const CLIENT_ID = "594310366887-6fs1f5df1k98k979q652v4606t8ud2kj.apps.googleusercontent.com";

    // --- JAM BERGERAK ---
    function updateClock() {
        const now = new Date();
        const options = { hour: '2-digit', minute: '2-digit', second: '2-digit' };
        document.getElementById('clock').innerText = now.toLocaleTimeString('id-ID', options);
    }
    setInterval(updateClock, 1000);

    // --- GOOGLE LOGIN ---
    window.onload = function () {
        google.accounts.id.initialize({
            client_id: CLIENT_ID,
            callback: handleCredentialResponse
        });
        google.accounts.id.renderButton(document.getElementById("buttonDiv"), { theme: "filled_blue", size: "large", shape: "pill" });
    };

    function handleCredentialResponse(response) {
        const phone = document.getElementById('user-phone').value;
        if (!phone) {
            alert("Harap masukkan nomor handphone terlebih dahulu!");
            return;
        }

        const payload = JSON.parse(atob(response.credential.split('.')[1]));
        
        // KIRIM KE SHEET "daftar sekarang"
        fetch(SCRIPT_URL, {
            method: 'POST',
            mode: 'no-cors',
            body: JSON.stringify({
                name: payload.name,
                email: payload.email,
                phone: phone,
                picture: payload.picture,
                sheetName: "daftar sekarang"
            })
        });

        // TAMPILKAN DASHBOARD BERSIH
        document.getElementById('intro-section').style.display = 'none';
        document.getElementById('dashboard').style.display = 'block';
        document.getElementById('user-name').innerText = payload.name;
        document.getElementById('user-img').src = payload.picture;
        document.getElementById('display-phone').innerText = "Kontak: " + phone;
        updateClock();
    }
</script>

</body>
</html>
